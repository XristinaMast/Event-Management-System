## Περιεχόμενα

1. [Επιπλέον Παραδοχές και Παρεκκλίσεις](#Επιπλέον-Παραδοχές-και-Παρεκκλίσεις)
2. [Χρησιμοποιούμενες Τεχνολογίες](#Χρησιμοποιούμενες-Τεχνολογίες)
3. [Περιγραφή των Αρχείων](#Περιγραφή-των-Αρχείων)
4. [Πώς Εκτελείται το Σύστημα](#Πώς-Εκτελείται-το-Σύστημα)
5. [Πώς να Χρησιμοποιήσετε το Σύστημα (με Παραδείγματα Εκτέλεσης)](#Πώς-να-Χρησιμοποιήσετε-το-Σύστημα-με-Παραδείγματα-Εκτέλεσης)
6. [Αναφορές](#Αναφορές)



## Επιπλέον Παραδοχές και Παρεκκλίσεις
- Ο διαχειριστής (admin) δημιουργείται αυτόματα όταν ξεκινά το σύστημα και δεν μπορεί να εγγραφεί όπως οι κανονικοί χρήστες. Τα στοιχεία σύνδεσης του διαχειριστή είναι:
  - **Όνομα χρήστη**: `admin`
  - **Κωδικός**: `@dm!n69%`
- Το σύστημα υποθέτει ότι τα events αποθηκεύονται σε cookies.
- Οι ημερομηνίες εκδηλώσεων συγκρίνονται χρησιμοποιώντας τη βιβλιοθήκη `datetime` της Python, εξασφαλίζοντας ότι εμφανίζονται μόνο μελλοντικές εκδηλώσεις κατά την αναζήτηση.
- Ο κωδικός πρόσβασης του διαχειριστή είναι κρυπτογραφημένος για λόγους ασφάλειας.

## Χρησιμοποιούμενες Τεχνολογίες
- **Flask**: Web framework για τη δημιουργία του REST API.
- **Flask-PyMongo**: Επέκταση για την ενσωμάτωση του Flask με το MongoDB.
- **MongoDB**: NoSQL βάση δεδομένων για την αποθήκευση χρηστών και εκδηλώσεων.
- **Werkzeug**: Παρέχει εργαλεία για την κρυπτογράφηση και ασφαλή σύγκριση κωδικών πρόσβασης.
- **Docker**: Χρησιμοποιείται για την containerization της εφαρμογής Flask και του MongoDB για εύκολη ανάπτυξη και κλιμάκωση.
- **Python 3.9**: Η γλώσσα στην οποία είναι γραμμένη η εφαρμογή.
- **pymongo**: Το native Python driver για τη σύνδεση με το MongoDB.

## Περιγραφή των Αρχείων

- **code.py**: Το κύριο αρχείο της εφαρμογής που περιέχει όλα τα API routes, συμπεριλαμβανομένων της εγγραφής χρηστών, της σύνδεσης, της δημιουργίας εκδηλώσεων κ.ά.
- **Dockerfile**: Περιέχει οδηγίες για τη δημιουργία του Docker image της εφαρμογής Flask, εγκαθιστά τις εξαρτήσεις και εκκινεί την εφαρμογή.
- **docker-compose.yaml**: Ορίζει τις υπηρεσίες (Flask και MongoDB), τις ρυθμίσεις τους και το δίκτυο. Οργανώνει την εκτέλεση πολλαπλών κοντέινερ.
- **requirements.txt**: Λίστα με τις Python εξαρτήσεις που απαιτούνται για το έργο (Flask, Flask-PyMongo, Werkzeug, pymongo).
- **/data/**: Ένας φάκελος που είναι συνδεδεμένος στο κοντέινερ του MongoDB για την αποθήκευση δεδομένων, ώστε να διασφαλίζεται η διατήρηση των δεδομένων σε περίπτωση που διαγραφεί το κοντέινερ.

## Πώς Εκτελείται το Σύστημα

### Απαιτήσεις
- Θα πρέπει να έχετε εγκαταστήσει το **Docker** και το **Docker Compose**.

### Βήματα Εκτέλεσης

1. **Κλωνοποίηση του Repository**:
   ```bash
   git clone https://github.com/your-repository.git
   cd your-repository
   ```

2. **Δημιουργία και Εκκίνηση της Εφαρμογής**:
   Βεβαιωθείτε ότι βρίσκεστε στον φάκελο που περιέχει το `docker-compose.yaml`. Εκτελέστε την ακόλουθη εντολή:
   ```bash
   docker-compose up
   ```
   Αυτό θα:
   - Κατεβάσει τα απαραίτητα Docker images (MongoDB και Python).
   - Δημιουργήσει το image της εφαρμογής Flask.
   - Δημιουργήσει και εκκινήσει κοντέινερ για το MongoDB και το Flask.
   
3. **Πρόσβαση στην Εφαρμογή**:
   Το API του Flask θα είναι διαθέσιμο στη διεύθυνση:
   ```
   http://localhost:5000
   ```
   Το MongoDB θα είναι διαθέσιμο στη διεύθυνση:
   ```
   mongodb://localhost:27017/HospitalDB
   ```

4. **Σταμάτημα του Συστήματος**:
   Για να σταματήσετε τα κοντέινερ, πατήστε `Ctrl + C` στο terminal και στη συνέχεια εκτελέστε:
   ```bash
   docker-compose down
   ```

### Διατήρηση Δεδομένων
Το κοντέινερ του MongoDB χρησιμοποιεί έναν όγκο Docker (`./data:/data/db`) για την αποθήκευση των δεδομένων. Αυτό διασφαλίζει ότι ακόμη και αν διαγραφεί το κοντέινερ, τα δεδομένα των χρηστών και των εκδηλώσεων παραμένουν.

## Πώς να Χρησιμοποιήσετε το Σύστημα (με Παραδείγματα Εκτέλεσης)

Ακολουθούν οι λεπτομέρειες για την αλληλεπίδραση με το σύστημα μέσω των API endpoints. Μπορείτε να χρησιμοποιήσετε εργαλεία όπως το **Postman** ή το **cURL** για να στείλετε αιτήματα.

### 1. **Εγγραφή Διαχειριστή (Προκαθορισμένος Admin)**
   - Ο διαχειριστής δημιουργείται αυτόματα όταν ξεκινά η εφαρμογή, επομένως δεν απαιτείται κλήση API για αυτό.

   - Διαπιστευτήρια:
     - Όνομα χρήστη: `admin`
     - Κωδικός: `@dm!n69%`

### 2. **Εγγραφή Χρήστη**
   - **Διεύθυνση**: `/register`
   - **Μέθοδος**: `POST`
   - **Παράδειγμα Αιτήματος**:
     ```bash
     curl -X POST http://localhost:5000/register \
     -H "Content-Type: application/json" \
     -d '{
       "first_name": "John",
       "last_name": "Doe",
       "email": "john@example.com",
       "username": "john123",
       "password": "mypassword"
     }'
     ```
   - **Αναμενόμενη Απόκριση**:
     - 201: "User registered successfully!"
     - 409: "Username or Email already exists!"

### 3. **Σύνδεση Χρήστη**
   - **Διεύθυνση**: `/login`
   - **Μέθοδος**: `POST`
   - **Παράδειγμα Αιτήματος**:
     ```bash
     curl -X POST http://localhost:5000/login \
     -H "Content-Type: application/json" \
     -d '{
       "username": "john123",
       "password": "mypassword"
     }'
     ```
   - **Αναμενόμενη Απόκριση**:
     - 200: "Login successful!"
     - 401: "Invalid username or password!"

### 4. **Δημιουργία Εκδήλωσης**
   - **Διεύθυνση**: `/events`
   - **Μέθοδο

ς**: `POST`
   - **Παράδειγμα Αιτήματος**:
     ```bash
     curl -X POST http://localhost:5000/events \
     -H "Content-Type: application/json" \
     -b cookie.txt \
     -d '{
       "event_title": "Tech Conference",
       "event_description": "A conference on tech trends",
       "event_date": "2024-10-10",
       "event_hour": "10:00",
       "event_placement": "New York",
       "event_type": "conference"
     }'
     ```
   - **Αναμενόμενη Απόκριση**:
     - 201: "Event created successfully!"
     - 403: "Please log in first!" (εάν ο χρήστης δεν είναι συνδεδεμένος)

### 5. **Προβολή Όλων των Εκδηλώσεων**
   - **Διεύθυνση**: `/events`
   - **Μέθοδος**: `GET`
   - **Παράδειγμα Αιτήματος**:
     ```bash
     curl -X GET http://localhost:5000/events -b cookie.txt
     ```
   - **Αναμενόμενη Απόκριση**:
     Μια λίστα με όλες τις μελλοντικές εκδηλώσεις σε μορφή JSON.

### 6. **Ενημέρωση Εκδήλωσης**
   - **Διεύθυνση**: `/events/<id>`
   - **Μέθοδος**: `PUT`
   - **Παράδειγμα Αιτήματος**:
     ```bash
     curl -X PUT http://localhost:5000/events/614c0e7e6f8b4c35b048c123 \
     -H "Content-Type: application/json" \
     -b cookie.txt \
     -d '{
       "event_title": "Updated Tech Conference",
       "event_description": "An updated conference description",
       "event_date": "2024-10-15",
       "event_hour": "11:00",
       "event_placement": "San Francisco",
       "event_type": "conference"
     }'
     ```
   - **Αναμενόμενη Απόκριση**:
     - 200: "Event updated successfully!"
     - 403: "Please log in first!"

### 7. **Διαγραφή Εκδήλωσης**
   - **Διεύθυνση**: `/events/<id>`
   - **Μέθοδος**: `DELETE`
   - **Παράδειγμα Αιτήματος**:
     ```bash
     curl -X DELETE http://localhost:5000/events/614c0e7e6f8b4c35b048c123 -b cookie.txt
     ```
   - **Αναμενόμενη Απόκριση**:
     - 200: "Event deleted successfully!"
     - 403: "Unauthorized action!"

### 8. **Αναζήτηση Εκδηλώσεων**
   - **Διεύθυνση**: `/search`
   - **Μέθοδος**: `GET`
   - **Παράδειγμα Αιτήματος**:
     ```bash
     curl -X GET "http://localhost:5000/search?event_title=Tech&event_type=conference" -b cookie.txt
     ```
   - **Αναμενόμενη Απόκριση**:
     Μια λίστα με εκδηλώσεις που ταιριάζουν με τα κριτήρια αναζήτησης σε μορφή JSON.

## Αναφορές
https://github.com/karamolegkos/Information-Systems-Lab/tree/master
